# Git 智能提交命令

分析当前代码变更，自动生成符合项目规范的提交信息并执行提交。支持功能域拆分，确保每个 commit 职责单一。

## 功能特性

- 🤖 **智能分析**: 自动分析代码变更内容和文件类型
- 📝 **规范生成**: 遵循项目 commit message 规范（type(scope): description）
- 🎯 **范围识别**: 自动识别影响的功能域（auth, ui, api, deploy 等）
- 🔄 **智能拆分**: 根据功能域自动建议拆分多个 commit
- 📋 **变更预览**: 显示文件变更摘要和生成的提交信息
- 🚀 **自动执行**: 直接执行提交，无需用户二次确认
- 🚀 **批量提交**: 支持单个或多个功能域的批量提交
- 📊 **分组展示**: 按功能域分组展示变更文件

## 使用方法

```bash
/commit                    # 分析变更并直接执行提交（无需确认）
/commit --single          # 强制单次提交所有变更
/commit --split           # 强制按功能域拆分提交
/commit --scope <domain>  # 只提交指定功能域的变更
/commit --no-verify       # 跳过预提交钩子
/commit --amend          # 修改最后一次提交
```

## Commit 类型规范

根据项目规范，支持以下提交类型：

- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更改
- `style`: 代码格式化
- `refactor`: 重构
- `perf`: 性能优化
- `test`: 增加测试
- `chore`: 构建过程或辅助工具变动
- `deploy`: 部署相关

## 功能域识别与拆分策略

自动识别以下功能域并建议拆分：

### 核心功能域

- `auth`: 认证相关文件（登录、注册、OAuth）
- `ui`: 用户界面组件和页面
- `api`: API接口和路由处理
- `db`: 数据库模型和操作

### 配置与部署

- `config`: 配置文件和环境变量
- `deploy`: 部署和Docker相关
- `deps`: 依赖项管理

### 工具与类型

- `utils`: 工具函数和helpers
- `types`: TypeScript类型定义

### 文档与测试

- `docs`: 文档文件
- `test`: 测试文件

## 智能拆分逻辑（重要，每次提交必须要做）

1. **检测多域变更**: 当变更涉及3个以上功能域时，自动建议拆分
2. **优先级排序**: 按照影响程度和依赖关系排序提交顺序
3. **关联性分析**: 识别紧密相关的文件，建议合并提交
4. **提交策略**:
   - 小改动（< 3个文件，1个功能域）: 建议单次提交
   - 中等改动（3-10个文件，2-3个功能域）: 提供拆分选项
   - 大改动（> 10个文件或 > 3个功能域）: 强烈建议拆分

## 提交顺序建议

推荐的提交顺序（按依赖关系）：

1. `config` / `types` / `utils` - 基础设施
2. `db` - 数据层
3. `api` - 接口层
4. `utils` / `auth` - 业务逻辑
5. `ui` - 界面层
6. `docs` - 文档
7. `deploy` / `chore` - 配置和工具
