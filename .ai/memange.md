## 记忆管理

### 记忆存储位置

所有操作记录、数据结构、页面信息、重要决策、调试过程等将以Markdown文件的形式存储在 `~/.mem/` 目录下。

### 文件命名约定

- **操作记录**: `YYYYMMDD-HHMMSS-operation-[简要描述].md` (例如: `20250815-123000-operation-migrate-db.md`)
  - **数据表定义**: `data-table-[表名].md` (例如: `data-table-users.md`)
  - **Web页面结构**: `web-page-[页面名称].md` (例如: `web-page-dashboard.md`)
  - **API 接口定义**: `api-endpoint-[端点名称].md` (例如: `api-endpoint-auth-login.md`)
  - **重要决策/概念**: `concept-[概念名称].md` (例如: `concept-jwt-auth-flow.md`)
  - **调试/问题解决**: `debug-[YYYYMMDD]-[简要描述].md` (例如: `debug-20250815-mongodb-connection.md`)
- **内容格式**: 每个记忆文件都应包含清晰的标题、日期（如果适用）、详细描述、相关代码片段、配置信息、截图链接或任何有助于理解的信息。
  - 对于数据表，应包含字段名、类型、约束、索引等。
  - 对于Web页面，应包含URL、主要功能、使用的组件、数据流、用户交互等。
  - 对于API接口，应包含请求方法、URL、请求/响应体示例、认证要求、错误码等。
- **引用机制**: 当需要引用已记录的信息时，请使用 `@./.mem/[文件路径]` 的形式进行引用。例如，你可以说：“请参考 `@./.mem/data-table-users.md` 中的用户表结构。” Claude Code 可以通过这种方式加载相关文件内容以获取上下文。 [6, 9]

### 自动记忆指令

当执行以下操作时，Claude AI 助手应自动创建或更新相应的记忆文件：

- **数据库操作**:
  - 当创建、修改或删除数据库表时，更新或创建 `data-table-[表名].md` 文件，记录表的结构、字段、数据类型和任何约束。
  - 当执行重要的数据迁移操作时，创建 `YYYYMMDD-HHMMSS-operation-data-migration-[简要描述].md` 文件，记录迁移的目的、步骤和结果。
- **Web页面开发**:
  - 当创建新页面或对现有页面进行重大修改时，更新或创建 `web-page-[页面名称].md` 文件，记录页面的URL、主要功能、使用的组件、数据流和任何特殊交互。
- **API开发**:
  - 当设计、修改或实现API端点时，创建或更新 `api-endpoint-[端点名称].md` 文件，记录请求方法、URL、请求/响应体示例、认证要求和任何特殊逻辑。
- **重要决策**:
  - 当做出任何影响项目架构、技术选型或重要实现细节的决策时，创建 `concept-[决策名称].md` 文件，记录决策背景、可选方案、最终选择和理由。
- **复杂操作/调试**:
  - 当完成一个复杂的任务或解决一个棘手的bug时，创建 `YYYYMMDD-HHMMSS-operation-[任务/bug描述].md` 或 `debug-[YYYYMMDD]-[简要描述].md` 文件，记录问题、分析过程、解决方案和任何吸取的教训。
  - 尤其是在调试过程中，记录遇到的错误信息、尝试的解决方案和最终的修复方法。

### 查询与检索

你可以通过以下方式向我查询记忆中的信息：

- **查询数据表**: "请告诉我关于 `users` 表的结构。" (我将查找并引用 `data-table-users.md`)
- **查询Web页面**: "`dashboard` 页面的主要功能是什么？" (我将查找并引用 `web-page-dashboard.md`)
- **查询API接口**: "登录API的请求和响应示例是什么？" (我将查找并引用 `api-endpoint-auth-login.md`)
- **查询操作记录**: "我上次进行数据库迁移的记录是什么？" (我将查找最新的 `operation-data-migration-*.md` 文件)
- **查询特定概念**: "请解释一下 JWT 认证流程的设计。" (我将查找并引用 `concept-jwt-auth-flow.md`)
- **查询调试记录**: "关于 MongoDB 连接问题的调试记录在哪里？" (我将查找 `debug-*-mongodb-connection.md` 文件)

当然，记忆模块并不仅限于以上内容，任何与项目相关的信息都可以被记录下来。

### 维护与更新

- 定期审查 `~/.mem/` 目录下的记忆文件，确保其准确性和完整性。
- 如果某个记忆文件过时或不再相关，可以将其归档或删除。
- 鼓励在每次会话结束时，通过简要总结关键信息并指示我将其保存到相关记忆文件中，来主动管理记忆。
- 当我提出需要记录的信息时，请确认是否需要保存到 `~/.mem/` 目录，并指定文件名。
